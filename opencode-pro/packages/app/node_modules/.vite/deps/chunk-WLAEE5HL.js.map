{
  "version": 3,
  "sources": ["../../../../../node_modules/.bun/@solid-primitives+event-listener@2.4.3+95b571dd5236cc92/node_modules/@solid-primitives/event-listener/dist/eventListener.js"],
  "sourcesContent": ["import { access, asArray, tryOnCleanup, } from \"@solid-primitives/utils\";\nimport { createEffect, createRenderEffect, createSignal } from \"solid-js\";\nimport { isServer } from \"solid-js/web\";\nexport function makeEventListener(target, type, handler, options) {\n    target.addEventListener(type, handler, options);\n    return tryOnCleanup(target.removeEventListener.bind(target, type, handler, options));\n}\nexport function createEventListener(targets, type, handler, options) {\n    if (isServer)\n        return;\n    const attachListeners = () => {\n        asArray(access(targets)).forEach(el => {\n            if (el)\n                asArray(access(type)).forEach(type => makeEventListener(el, type, handler, options));\n        });\n    };\n    // if the target is an accessor the listeners will be added on the first effect (onMount)\n    // so that when passed a jsx ref it will be availabe\n    if (typeof targets === \"function\")\n        createEffect(attachListeners);\n    // if the target prop is NOT an accessor, the event listeners can be added right away\n    else\n        createRenderEffect(attachListeners);\n}\nexport function createEventSignal(target, type, options) {\n    if (isServer) {\n        return () => undefined;\n    }\n    const [lastEvent, setLastEvent] = createSignal();\n    createEventListener(target, type, setLastEvent, options);\n    return lastEvent;\n}\n/**\n * Directive Usage. Creates an event listener, that will be automatically disposed on cleanup.\n *\n * @param props [eventType, handler, options]\n *\n * @example\n * <button use:eventListener={[\"click\", () => {...}]}>Click me!</button>\n */\nexport const eventListener = (target, props) => {\n    createEffect(() => {\n        const [type, handler, options] = props();\n        makeEventListener(target, type, handler, options);\n    });\n};\n// // /* TypeCheck */\n// const mouseHandler = (e: MouseEvent) => {};\n// const touchHandler = (e: TouchEvent) => {};\n// const el = document.createElement(\"div\");\n// // dom events\n// createEventListener(window as Window | undefined, \"mousemove\", mouseHandler);\n// createEventListener(document, \"touchstart\", touchHandler);\n// createEventListener(el, \"mousemove\", mouseHandler);\n// createEventListener(() => el, \"touchstart\", touchHandler);\n// const mouseSignal = createEventSignal(window, \"mousemove\");\n// const touchSignal = createEventSignal(() => document, \"touchstart\");\n// // custom events\n// createEventListener<{ test: MouseEvent }>(window, \"test\", mouseHandler);\n// createEventListener<{ test: Event; custom: MouseEvent }, \"custom\">(\n//   () => el,\n//   \"custom\",\n//   mouseHandler\n// );\n// createEventListener<{ test: Event }>(new EventTarget(), \"test\", () => console.log(\"test\"));\n// const testSignal = createEventSignal<{ test: MouseEvent }>(window, \"test\");\n// const customSignal = createEventSignal<{ test: Event; custom: MouseEvent }, \"custom\">(\n//   () => document,\n//   \"custom\"\n// );\n// // directive\n// eventListener(el, () => [\"mousemove\", mouseHandler, { passive: true }]);\n// eventListener(el, () => [\"custom\", e => {}]);\n"],
  "mappings": ";;;;;;;;;;;;;;AAGO,SAAS,kBAAkB,QAAQ,MAAM,SAAS,SAAS;AAC9D,SAAO,iBAAiB,MAAM,SAAS,OAAO;AAC9C,SAAO,aAAa,OAAO,oBAAoB,KAAK,QAAQ,MAAM,SAAS,OAAO,CAAC;AACvF;AACO,SAAS,oBAAoB,SAAS,MAAM,SAAS,SAAS;AACjE,MAAI;AACA;AACJ,QAAM,kBAAkB,MAAM;AAC1B,YAAQ,OAAO,OAAO,CAAC,EAAE,QAAQ,QAAM;AACnC,UAAI;AACA,gBAAQ,OAAO,IAAI,CAAC,EAAE,QAAQ,CAAAA,UAAQ,kBAAkB,IAAIA,OAAM,SAAS,OAAO,CAAC;AAAA,IAC3F,CAAC;AAAA,EACL;AAGA,MAAI,OAAO,YAAY;AACnB,iBAAa,eAAe;AAAA;AAG5B,uBAAmB,eAAe;AAC1C;",
  "names": ["type"]
}
