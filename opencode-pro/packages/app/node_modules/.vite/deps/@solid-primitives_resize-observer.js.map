{
  "version": 3,
  "sources": ["../../../../../node_modules/.bun/@solid-primitives+resize-observer@2.1.3+95b571dd5236cc92/node_modules/@solid-primitives/resize-observer/dist/index.js"],
  "sourcesContent": ["import { makeEventListener } from \"@solid-primitives/event-listener\";\nimport { createHydratableSingletonRoot } from \"@solid-primitives/rootless\";\nimport { createHydratableStaticStore, createStaticStore } from \"@solid-primitives/static-store\";\nimport { access, asArray, handleDiffArray, noop, filterNonNullable, } from \"@solid-primitives/utils\";\nimport { createEffect, onCleanup, sharedConfig } from \"solid-js\";\nimport { isServer } from \"solid-js/web\";\n/**\n * Instantiate a new ResizeObserver that automatically get's disposed on cleanup.\n *\n * @param callback handler called once element size changes\n * @param options ResizeObserver options\n * @returns `observe` and `unobserve` functions\n */\nexport function makeResizeObserver(callback, options) {\n    if (isServer) {\n        return { observe: noop, unobserve: noop };\n    }\n    const observer = new ResizeObserver(callback);\n    onCleanup(observer.disconnect.bind(observer));\n    return {\n        observe: ref => observer.observe(ref, options),\n        unobserve: observer.unobserve.bind(observer),\n    };\n}\n/**\n * Create resize observer instance, listening for changes to size of the reactive {@link targets} array.\n *\n * @param targets Elements to be observed. Can be a reactive signal or store top-level array.\n * @param onResize - Function handler to trigger on element resize\n *\n * @example\n * ```tsx\n * let ref\n * createResizeObserver(() => ref, ({ width, height }, el) => {\n *   if (el === ref) console.log(width, height)\n * });\n * <div ref={ref}/>\n * ```\n */\nexport function createResizeObserver(targets, onResize, options) {\n    if (isServer)\n        return;\n    const previousMap = new WeakMap(), { observe, unobserve } = makeResizeObserver(entries => {\n        for (const entry of entries) {\n            const { contentRect, target } = entry, width = Math.round(contentRect.width), height = Math.round(contentRect.height), previous = previousMap.get(target);\n            if (!previous || previous.width !== width || previous.height !== height) {\n                onResize(contentRect, target, entry);\n                previousMap.set(target, { width, height });\n            }\n        }\n    }, options);\n    createEffect((prev) => {\n        const refs = filterNonNullable(asArray(access(targets)));\n        handleDiffArray(refs, prev, observe, unobserve);\n        return refs;\n    }, []);\n}\nconst WINDOW_SIZE_FALLBACK = { width: 0, height: 0 };\n/**\n * @returns object with width and height dimensions of window, page and screen.\n */\nexport function getWindowSize() {\n    if (isServer)\n        return { ...WINDOW_SIZE_FALLBACK };\n    return {\n        width: window.innerWidth,\n        height: window.innerHeight,\n    };\n}\n/**\n * Creates a reactive store-like object of current width and height dimensions of window, page and screen.\n * @example\n * const size = createWindowSize();\n * createEffect(() => {\n *   console.log(size.width, size.height)\n * })\n */\nexport function createWindowSize() {\n    if (isServer) {\n        return WINDOW_SIZE_FALLBACK;\n    }\n    const [size, setSize] = createHydratableStaticStore(WINDOW_SIZE_FALLBACK, getWindowSize);\n    makeEventListener(window, \"resize\", () => setSize(getWindowSize()));\n    return size;\n}\n/**\n * Returns a reactive store-like object of current width and height dimensions of window, page and screen.\n *\n * This is a [singleton root](https://github.com/solidjs-community/solid-primitives/tree/main/packages/rootless#createSingletonRoot) primitive.\n *\n * @example\n * const size = useWindowSize();\n * createEffect(() => {\n *   console.log(size.width, size.height)\n * })\n */\nexport const useWindowSize = \n/*#__PURE__*/ createHydratableSingletonRoot(createWindowSize);\nconst ELEMENT_SIZE_FALLBACK = { width: null, height: null };\n/**\n * @param target html element\n * @returns object with width and height dimensions of provided {@link target} element.\n */\nexport function getElementSize(target) {\n    if (isServer || !target) {\n        return { ...ELEMENT_SIZE_FALLBACK };\n    }\n    const { width, height } = target.getBoundingClientRect();\n    return { width, height };\n}\nexport function createElementSize(target) {\n    if (isServer) {\n        return ELEMENT_SIZE_FALLBACK;\n    }\n    const isFn = typeof target === \"function\";\n    const [size, setSize] = createStaticStore(sharedConfig.context || isFn ? ELEMENT_SIZE_FALLBACK : getElementSize(target));\n    const ro = new ResizeObserver(([e]) => setSize(getElementSize(e.target)));\n    onCleanup(() => ro.disconnect());\n    if (isFn) {\n        createEffect(() => {\n            const el = target();\n            if (el) {\n                setSize(getElementSize(el));\n                ro.observe(el);\n                onCleanup(() => ro.unobserve(el));\n            }\n        });\n    }\n    else {\n        ro.observe(target);\n        onCleanup(() => ro.unobserve(target));\n    }\n    return size;\n}\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;;;;;;;;;;;AAaO,SAAS,mBAAmB,UAAU,SAAS;AAClD,MAAI,UAAU;AACV,WAAO,EAAE,SAAS,MAAM,WAAW,KAAK;AAAA,EAC5C;AACA,QAAM,WAAW,IAAI,eAAe,QAAQ;AAC5C,YAAU,SAAS,WAAW,KAAK,QAAQ,CAAC;AAC5C,SAAO;AAAA,IACH,SAAS,SAAO,SAAS,QAAQ,KAAK,OAAO;AAAA,IAC7C,WAAW,SAAS,UAAU,KAAK,QAAQ;AAAA,EAC/C;AACJ;AAgBO,SAAS,qBAAqB,SAAS,UAAU,SAAS;AAC7D,MAAI;AACA;AACJ,QAAM,cAAc,oBAAI,QAAQ,GAAG,EAAE,SAAS,UAAU,IAAI,mBAAmB,aAAW;AACtF,eAAW,SAAS,SAAS;AACzB,YAAM,EAAE,aAAa,OAAO,IAAI,OAAO,QAAQ,KAAK,MAAM,YAAY,KAAK,GAAG,SAAS,KAAK,MAAM,YAAY,MAAM,GAAG,WAAW,YAAY,IAAI,MAAM;AACxJ,UAAI,CAAC,YAAY,SAAS,UAAU,SAAS,SAAS,WAAW,QAAQ;AACrE,iBAAS,aAAa,QAAQ,KAAK;AACnC,oBAAY,IAAI,QAAQ,EAAE,OAAO,OAAO,CAAC;AAAA,MAC7C;AAAA,IACJ;AAAA,EACJ,GAAG,OAAO;AACV,eAAa,CAAC,SAAS;AACnB,UAAM,OAAO,kBAAkB,QAAQ,OAAO,OAAO,CAAC,CAAC;AACvD,oBAAgB,MAAM,MAAM,SAAS,SAAS;AAC9C,WAAO;AAAA,EACX,GAAG,CAAC,CAAC;AACT;AACA,IAAM,uBAAuB,EAAE,OAAO,GAAG,QAAQ,EAAE;AAI5C,SAAS,gBAAgB;AAC5B,MAAI;AACA,WAAO,EAAE,GAAG,qBAAqB;AACrC,SAAO;AAAA,IACH,OAAO,OAAO;AAAA,IACd,QAAQ,OAAO;AAAA,EACnB;AACJ;AASO,SAAS,mBAAmB;AAC/B,MAAI,UAAU;AACV,WAAO;AAAA,EACX;AACA,QAAM,CAAC,MAAM,OAAO,IAAI,4BAA4B,sBAAsB,aAAa;AACvF,oBAAkB,QAAQ,UAAU,MAAM,QAAQ,cAAc,CAAC,CAAC;AAClE,SAAO;AACX;AAYO,IAAM,gBACC,8BAA8B,gBAAgB;AAC5D,IAAM,wBAAwB,EAAE,OAAO,MAAM,QAAQ,KAAK;AAKnD,SAAS,eAAe,QAAQ;AACnC,MAAI,YAAY,CAAC,QAAQ;AACrB,WAAO,EAAE,GAAG,sBAAsB;AAAA,EACtC;AACA,QAAM,EAAE,OAAO,OAAO,IAAI,OAAO,sBAAsB;AACvD,SAAO,EAAE,OAAO,OAAO;AAC3B;AACO,SAAS,kBAAkB,QAAQ;AACtC,MAAI,UAAU;AACV,WAAO;AAAA,EACX;AACA,QAAM,OAAO,OAAO,WAAW;AAC/B,QAAM,CAAC,MAAM,OAAO,IAAI,kBAAkB,aAAa,WAAW,OAAO,wBAAwB,eAAe,MAAM,CAAC;AACvH,QAAM,KAAK,IAAI,eAAe,CAAC,CAAC,CAAC,MAAM,QAAQ,eAAe,EAAE,MAAM,CAAC,CAAC;AACxE,YAAU,MAAM,GAAG,WAAW,CAAC;AAC/B,MAAI,MAAM;AACN,iBAAa,MAAM;AACf,YAAM,KAAK,OAAO;AAClB,UAAI,IAAI;AACJ,gBAAQ,eAAe,EAAE,CAAC;AAC1B,WAAG,QAAQ,EAAE;AACb,kBAAU,MAAM,GAAG,UAAU,EAAE,CAAC;AAAA,MACpC;AAAA,IACJ,CAAC;AAAA,EACL,OACK;AACD,OAAG,QAAQ,MAAM;AACjB,cAAU,MAAM,GAAG,UAAU,MAAM,CAAC;AAAA,EACxC;AACA,SAAO;AACX;",
  "names": []
}
