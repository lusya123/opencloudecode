{"version":3,"file":"createSeparator.js","names":["contentChildren: ElementContent[]"],"sources":["../../src/utils/createSeparator.ts"],"sourcesContent":["import type { ElementContent, Element as HASTElement } from 'hast';\n\nimport type { ExpansionDirections, HunkSeparators } from '../types';\nimport {\n  createHastElement,\n  createIconElement,\n  createTextNodeElement,\n} from './hast_utils';\n\ninterface CreateSeparatorProps {\n  type: HunkSeparators;\n  content?: string;\n  expandIndex?: number;\n  chunked?: boolean;\n  slotName?: string;\n  isFirstHunk: boolean;\n  isLastHunk: boolean;\n}\n\nfunction createExpandButton(type: ExpansionDirections) {\n  return createHastElement({\n    tagName: 'div',\n    children: [\n      createIconElement({\n        name: type === 'both' ? 'diffs-icon-expand-all' : 'diffs-icon-expand',\n        properties: { 'data-icon': '' },\n      }),\n    ],\n    properties: {\n      'data-expand-button': '',\n      'data-expand-both': type === 'both' ? '' : undefined,\n      'data-expand-up': type === 'up' ? '' : undefined,\n      'data-expand-down': type === 'down' ? '' : undefined,\n    },\n  });\n}\n\nexport function createSeparator({\n  type,\n  content,\n  expandIndex,\n  chunked = false,\n  slotName,\n  isFirstHunk,\n  isLastHunk,\n}: CreateSeparatorProps): HASTElement {\n  const children = [];\n  if (type === 'metadata' && content != null) {\n    children.push(\n      createHastElement({\n        tagName: 'div',\n        children: [createTextNodeElement(content)],\n        properties: { 'data-separator-wrapper': '' },\n      })\n    );\n  }\n  if (type === 'line-info' && content != null) {\n    const contentChildren: ElementContent[] = [];\n    if (expandIndex != null) {\n      if (!chunked) {\n        contentChildren.push(\n          createExpandButton(\n            !isFirstHunk && !isLastHunk ? 'both' : isFirstHunk ? 'down' : 'up'\n          )\n        );\n      } else {\n        if (!isFirstHunk) {\n          contentChildren.push(createExpandButton('up'));\n        }\n        if (!isLastHunk) {\n          contentChildren.push(createExpandButton('down'));\n        }\n      }\n    }\n    contentChildren.push(\n      createHastElement({\n        tagName: 'div',\n        children: [\n          createHastElement({\n            tagName: 'span',\n            children: [createTextNodeElement(content)],\n            properties: { 'data-unmodified-lines': '' },\n          }),\n        ],\n        properties: { 'data-separator-content': '' },\n      })\n    );\n    children.push(\n      createHastElement({\n        tagName: 'div',\n        children: contentChildren,\n        properties: {\n          'data-separator-wrapper': '',\n          'data-separator-multi-button':\n            contentChildren.length > 2 ? '' : undefined,\n        },\n      })\n    );\n  }\n  if (type === 'custom' && slotName != null) {\n    children.push(\n      createHastElement({\n        tagName: 'slot',\n        properties: { name: slotName },\n      })\n    );\n  }\n  return createHastElement({\n    tagName: 'div',\n    children,\n    properties: {\n      'data-separator': children.length === 0 ? '' : type,\n      'data-expand-index': expandIndex,\n      'data-separator-first': isFirstHunk ? '' : undefined,\n      'data-separator-last': isLastHunk ? '' : undefined,\n    },\n  });\n}\n"],"mappings":";;;AAmBA,SAAS,mBAAmB,MAA2B;AACrD,QAAO,kBAAkB;EACvB,SAAS;EACT,UAAU,CACR,kBAAkB;GAChB,MAAM,SAAS,SAAS,0BAA0B;GAClD,YAAY,EAAE,aAAa,IAAI;GAChC,CAAC,CACH;EACD,YAAY;GACV,sBAAsB;GACtB,oBAAoB,SAAS,SAAS,KAAK;GAC3C,kBAAkB,SAAS,OAAO,KAAK;GACvC,oBAAoB,SAAS,SAAS,KAAK;GAC5C;EACF,CAAC;;AAGJ,SAAgB,gBAAgB,EAC9B,MACA,SACA,aACA,UAAU,OACV,UACA,aACA,cACoC;CACpC,MAAM,WAAW,EAAE;AACnB,KAAI,SAAS,cAAc,WAAW,KACpC,UAAS,KACP,kBAAkB;EAChB,SAAS;EACT,UAAU,CAAC,sBAAsB,QAAQ,CAAC;EAC1C,YAAY,EAAE,0BAA0B,IAAI;EAC7C,CAAC,CACH;AAEH,KAAI,SAAS,eAAe,WAAW,MAAM;EAC3C,MAAMA,kBAAoC,EAAE;AAC5C,MAAI,eAAe,KACjB,KAAI,CAAC,QACH,iBAAgB,KACd,mBACE,CAAC,eAAe,CAAC,aAAa,SAAS,cAAc,SAAS,KAC/D,CACF;OACI;AACL,OAAI,CAAC,YACH,iBAAgB,KAAK,mBAAmB,KAAK,CAAC;AAEhD,OAAI,CAAC,WACH,iBAAgB,KAAK,mBAAmB,OAAO,CAAC;;AAItD,kBAAgB,KACd,kBAAkB;GAChB,SAAS;GACT,UAAU,CACR,kBAAkB;IAChB,SAAS;IACT,UAAU,CAAC,sBAAsB,QAAQ,CAAC;IAC1C,YAAY,EAAE,yBAAyB,IAAI;IAC5C,CAAC,CACH;GACD,YAAY,EAAE,0BAA0B,IAAI;GAC7C,CAAC,CACH;AACD,WAAS,KACP,kBAAkB;GAChB,SAAS;GACT,UAAU;GACV,YAAY;IACV,0BAA0B;IAC1B,+BACE,gBAAgB,SAAS,IAAI,KAAK;IACrC;GACF,CAAC,CACH;;AAEH,KAAI,SAAS,YAAY,YAAY,KACnC,UAAS,KACP,kBAAkB;EAChB,SAAS;EACT,YAAY,EAAE,MAAM,UAAU;EAC/B,CAAC,CACH;AAEH,QAAO,kBAAkB;EACvB,SAAS;EACT;EACA,YAAY;GACV,kBAAkB,SAAS,WAAW,IAAI,KAAK;GAC/C,qBAAqB;GACrB,wBAAwB,cAAc,KAAK;GAC3C,uBAAuB,aAAa,KAAK;GAC1C;EACF,CAAC"}