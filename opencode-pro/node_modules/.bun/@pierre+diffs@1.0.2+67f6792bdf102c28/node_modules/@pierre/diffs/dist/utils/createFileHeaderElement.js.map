{"version":3,"file":"createFileHeaderElement.js","names":["properties: Properties","children: ElementContent[]"],"sources":["../../src/utils/createFileHeaderElement.ts"],"sourcesContent":["import type { ElementContent, Element as HASTElement, Properties } from 'hast';\n\nimport { HEADER_METADATA_SLOT_ID } from '../constants';\nimport type {\n  ChangeTypes,\n  FileContents,\n  FileDiffMetadata,\n  ThemeTypes,\n} from '../types';\nimport { getIconForType } from './getIconForType';\nimport {\n  createHastElement,\n  createIconElement,\n  createTextNodeElement,\n} from './hast_utils';\n\nexport interface CreateFileHeaderElementProps {\n  fileOrDiff: FileDiffMetadata | FileContents;\n  themeStyles: string;\n  themeType: ThemeTypes;\n}\n\nexport function createFileHeaderElement({\n  fileOrDiff,\n  themeStyles,\n  themeType,\n}: CreateFileHeaderElementProps): HASTElement {\n  const fileDiff = 'type' in fileOrDiff ? fileOrDiff : undefined;\n  const properties: Properties = {\n    'data-diffs-header': '',\n    'data-change-type': fileDiff?.type,\n    'data-theme-type': themeType !== 'system' ? themeType : undefined,\n    style: themeStyles,\n  };\n\n  return createHastElement({\n    tagName: 'div',\n    children: [\n      createHeaderElement({\n        name: fileOrDiff.name,\n        prevName: 'prevName' in fileOrDiff ? fileOrDiff.prevName : undefined,\n        iconType: fileDiff?.type ?? 'file',\n      }),\n      createMetadataElement(fileDiff),\n    ],\n    properties,\n  });\n}\n\ninterface CreateHeaderElementOptions {\n  name: string;\n  prevName?: string;\n  iconType: ChangeTypes | 'file';\n}\n\nfunction createHeaderElement({\n  name,\n  prevName,\n  iconType,\n}: CreateHeaderElementOptions): HASTElement {\n  const children: ElementContent[] = [\n    createIconElement({\n      name: getIconForType(iconType),\n      properties: { 'data-change-icon': iconType },\n    }),\n  ];\n  if (prevName != null) {\n    children.push(\n      createHastElement({\n        tagName: 'div',\n        children: [createTextNodeElement(prevName)],\n        properties: {\n          'data-prev-name': '',\n        },\n      })\n    );\n    children.push(\n      createIconElement({\n        name: 'diffs-icon-arrow-right-short',\n        properties: {\n          'data-rename-icon': '',\n        },\n      })\n    );\n  }\n  children.push(\n    createHastElement({\n      tagName: 'div',\n      children: [createTextNodeElement(name)],\n      properties: { 'data-title': '' },\n    })\n  );\n  return createHastElement({\n    tagName: 'div',\n    children,\n    properties: { 'data-header-content': '' },\n  });\n}\n\nfunction createMetadataElement(\n  fileDiff: FileDiffMetadata | undefined\n): HASTElement {\n  const children: ElementContent[] = [];\n  if (fileDiff != null) {\n    let additions = 0;\n    let deletions = 0;\n    for (const hunk of fileDiff.hunks) {\n      additions += hunk.additionLines;\n      deletions += hunk.deletionLines;\n    }\n    if (deletions > 0 || additions === 0) {\n      children.push(\n        createHastElement({\n          tagName: 'span',\n          children: [createTextNodeElement(`-${deletions}`)],\n          properties: { 'data-deletions-count': '' },\n        })\n      );\n    }\n    if (additions > 0 || deletions === 0) {\n      children.push(\n        createHastElement({\n          tagName: 'span',\n          children: [createTextNodeElement(`+${additions}`)],\n          properties: { 'data-additions-count': '' },\n        })\n      );\n    }\n  }\n  children.push(\n    createHastElement({\n      tagName: 'slot',\n      properties: { name: HEADER_METADATA_SLOT_ID },\n    })\n  );\n  return createHastElement({\n    tagName: 'div',\n    children,\n    properties: { 'data-metadata': '' },\n  });\n}\n"],"mappings":";;;;;AAsBA,SAAgB,wBAAwB,EACtC,YACA,aACA,aAC4C;CAC5C,MAAM,WAAW,UAAU,aAAa,aAAa;CACrD,MAAMA,aAAyB;EAC7B,qBAAqB;EACrB,oBAAoB,UAAU;EAC9B,mBAAmB,cAAc,WAAW,YAAY;EACxD,OAAO;EACR;AAED,QAAO,kBAAkB;EACvB,SAAS;EACT,UAAU,CACR,oBAAoB;GAClB,MAAM,WAAW;GACjB,UAAU,cAAc,aAAa,WAAW,WAAW;GAC3D,UAAU,UAAU,QAAQ;GAC7B,CAAC,EACF,sBAAsB,SAAS,CAChC;EACD;EACD,CAAC;;AASJ,SAAS,oBAAoB,EAC3B,MACA,UACA,YAC0C;CAC1C,MAAMC,WAA6B,CACjC,kBAAkB;EAChB,MAAM,eAAe,SAAS;EAC9B,YAAY,EAAE,oBAAoB,UAAU;EAC7C,CAAC,CACH;AACD,KAAI,YAAY,MAAM;AACpB,WAAS,KACP,kBAAkB;GAChB,SAAS;GACT,UAAU,CAAC,sBAAsB,SAAS,CAAC;GAC3C,YAAY,EACV,kBAAkB,IACnB;GACF,CAAC,CACH;AACD,WAAS,KACP,kBAAkB;GAChB,MAAM;GACN,YAAY,EACV,oBAAoB,IACrB;GACF,CAAC,CACH;;AAEH,UAAS,KACP,kBAAkB;EAChB,SAAS;EACT,UAAU,CAAC,sBAAsB,KAAK,CAAC;EACvC,YAAY,EAAE,cAAc,IAAI;EACjC,CAAC,CACH;AACD,QAAO,kBAAkB;EACvB,SAAS;EACT;EACA,YAAY,EAAE,uBAAuB,IAAI;EAC1C,CAAC;;AAGJ,SAAS,sBACP,UACa;CACb,MAAMA,WAA6B,EAAE;AACrC,KAAI,YAAY,MAAM;EACpB,IAAI,YAAY;EAChB,IAAI,YAAY;AAChB,OAAK,MAAM,QAAQ,SAAS,OAAO;AACjC,gBAAa,KAAK;AAClB,gBAAa,KAAK;;AAEpB,MAAI,YAAY,KAAK,cAAc,EACjC,UAAS,KACP,kBAAkB;GAChB,SAAS;GACT,UAAU,CAAC,sBAAsB,IAAI,YAAY,CAAC;GAClD,YAAY,EAAE,wBAAwB,IAAI;GAC3C,CAAC,CACH;AAEH,MAAI,YAAY,KAAK,cAAc,EACjC,UAAS,KACP,kBAAkB;GAChB,SAAS;GACT,UAAU,CAAC,sBAAsB,IAAI,YAAY,CAAC;GAClD,YAAY,EAAE,wBAAwB,IAAI;GAC3C,CAAC,CACH;;AAGL,UAAS,KACP,kBAAkB;EAChB,SAAS;EACT,YAAY,EAAE,MAAM,yBAAyB;EAC9C,CAAC,CACH;AACD,QAAO,kBAAkB;EACvB,SAAS;EACT;EACA,YAAY,EAAE,iBAAiB,IAAI;EACpC,CAAC"}